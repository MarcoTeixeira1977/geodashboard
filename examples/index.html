<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../dist/geo-dashboard.css" type="text/css">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <title>GeoDashboard Demo</title>
  <style>
    html, body, .dashboard {
      height: 100%;
      margin: 0;
      padding: 0;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="dashboard"></div>
  <script src="../dist/geo-dashboard.js" charset="utf-8"></script>

  <script>
    var server = 'http://geoserver.siasar.org/geoserver';
    var style = {
      label: {
        property: 'name'
      },
      color: {
        property: 'score',
        values: {
          'A': { color: '#54BA46' },
          'B': { color: '#FFFF39' },
          'C': { color: '#FF9326' },
          'D': { color: '#C92429' },
        },
      },
    };

    var dashboard = new GeoDashboard.Dashboard({
      container: document.getElementsByClassName('dashboard')[0],
      header: {
        title: 'GeoDashboard Demo',
        logo: 'geo-dashboard.png',
      },
      map: {
        center: [-75.01, -9.53],
        zoom: 7,
      },
      filters: [{
        property: 'adm_0',
        value: 'PERÃš'
      }],
    });

    dashboard.addBaseLayer(new GeoDashboard.BingLayer({
    key: 'AlMSfR3F4khtlIefjuE_NYpX403LdlGiod36WLn8HlawywtSud-NSgEklCemD5pR',
    }));
    dashboard.addBaseLayer(new GeoDashboard.OSMLayer());

    dashboard.addOverlayLayer(new GeoDashboard.WMSLayer({
      title: 'Heatmap',
      server: server,
      layer: 'siasar:communities',
      style: 'siasar:heatmap',
      exclusive: true,
      visible: false
    }));

    dashboard.addOverlayLayer(new GeoDashboard.WFSLayer({
      title: 'Communities',
      server: server,
      layer: 'siasar:communities',
      exclusive: true,
      visible: true,
      popup: [{
        title: 'Name',
        property: 'name',
      },{
        title: 'Location',
        property: 'adm_3',
      },{
        title: 'Population',
        property: 'population',
      }],
      style: style
    }));

    dashboard.addWidget(new GeoDashboard.CountWidget({
      title: 'Total Communities',
      server: server,
      layer: 'siasar:communities',
    }));

    dashboard.addWidget(new GeoDashboard.AggregateWidget({
      title: 'Total Population',
      server: server,
      layer: 'siasar:communities',
      property: 'population',
      function: 'Sum',
    }));

    dashboard.addWidget(new GeoDashboard.AggregateWidget({
      title: 'Average Population',
      server: server,
      layer: 'siasar:communities',
      property: 'population',
      function: 'Average',
    }));

    dashboard.render();
  </script>
</body>
</html>
